<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SecureBank - Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <h1>🏦 SecureBank</h1>
            <div class="user-info">
                <span id="userName">Kullanıcı</span>
                <button onclick="logout()" class="btn-secondary">Çıkış</button>
            </div>
        </div>
    </nav>
    
    <div class="dashboard-container">
        <aside class="sidebar">
            <button class="menu-item active" onclick="showSection('account')">
                💳 Hesabım
            </button>
            <button class="menu-item" onclick="showSection('transfer')">
                💸 Para Transfer
            </button>
            <button class="menu-item" onclick="showSection('history')">
                📊 İşlem Geçmişi
            </button>
        </aside>
        
        <main class="content">
            <!-- Account Section -->
            <div id="account-section" class="section active">
                <h2>Hesap Bilgileri</h2>
                <div class="account-card">
                    <div class="balance-info">
                        <p class="balance-label">Güncel Bakiye</p>
                        <h1 class="balance-amount" id="balance">₺0.00</h1>
                    </div>
                    <div class="account-details">
                        <p><strong>Hesap Sahibi:</strong> <span id="fullName">-</span></p>
                        <p><strong>Hesap No:</strong> <span id="accountNumber">-</span></p>
                        <p><strong>IBAN:</strong> <span id="iban">-</span></p>
                    </div>
                </div>
            </div>
            
            <!-- Transfer Section -->
            <div id="transfer-section" class="section">
                <h2>Para Transfer</h2>
                <form id="transferForm" class="transfer-form">
                    <div class="form-group">
                        <label for="toAccount">Alıcı Hesap Numarası</label>
                        <input type="text" id="toAccount" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="amount">Tutar (₺)</label>
                        <input type="number" id="amount" step="0.01" min="0.01" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="description">Açıklama</label>
                        <input type="text" id="description" placeholder="Opsiyonel">
                    </div>
                    
                    <button type="submit" class="btn-primary">Transfer Yap</button>
                </form>
                <div id="transfer-message" class="message"></div>
            </div>
            
            <!-- History Section -->
            <div id="history-section" class="section">
                <h2>İşlem Geçmişi</h2>
                <div class="filter-group">
                    <input type="text" id="accountFilter" placeholder="Hesap numarası ile filtrele (SQLi test için)">
                    <button onclick="loadTransactions()" class="btn-secondary">Filtrele</button>
                </div>
                <div id="transactions-list" class="transactions-list">
                    <p class="loading">İşlemler yükleniyor...</p>
                </div>
            </div>
        </main>
    </div>
    
    <script src="app.js"></script>
    <script>
        // Dashboard kontrolü
        if (!localStorage.getItem('token')) {
            window.location.href = 'login.html';
        }
        
        // Sayfa yüklendiğinde verileri çek
        window.onload = () => {
            loadAccountInfo();
            loadTransactions();
        };
    </script>
</body>
</html>